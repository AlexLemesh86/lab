Лабораторная работа. Доступ к сетевым устройствам по протоколу SSH


# Топология

![image](https://user-images.githubusercontent.com/80053204/115622939-3423fa80-a301-11eb-9a5c-715f252b8165.png)



# Таблица адресации

| Устройство | Интерфейс | IP-адрес | Маска подсети | Шлюз по умолчанию |
| --- | --- | --- | --- | --- |
| R1 | G0/0/1 | 192.168.1.1 | 255.255.255.0 | — |
| --- | --- | --- | --- | --- |
| S1 | VLAN 1 | 192.168.1.11 | 255.255.255.0 | 192.168.1.1 |
| PC-A | NIC | 192.168.1.3 | 255.255.255.0 | 192.168.1.1 |

# Задачи

**Часть 1. Настройка основных параметров устройства**

**Часть 2. Настройка маршрутизатора для доступа по протоколу SSH**

**Часть 3. Настройка коммутатора для доступа по протоколу SSH**

**Часть 4. SSH через интерфейс командной строки (CLI) коммутатора**


# Инструкции

  
## Настройка основных параметров устройств

В части 1 потребуется настроить топологию сети и основные параметры, такие как IP-адреса интерфейсов, доступ к устройствам и пароли на маршрутизаторе.

  
### Создайте сеть согласно топологии.
   
### Выполните инициализацию и перезагрузку маршрутизатора и коммутатора.
 
### Настройте маршрутизатор.

Откройте окно конфигурации

      1. Подключитесь к маршрутизатору с помощью консоли и активируйте привилегированный режим EXEC.
      2. Войдите в режим конфигурации.
      3. Отключите поиск DNS, чтобы предотвратить попытки маршрутизатора неверно преобразовывать введенные команды таким образом, как будто они являются именами узлов.
      4. Назначьте **class** в качестве зашифрованного пароля привилегированного режима EXEC.
      5. Назначьте **cisco** в качестве пароля консоли и включите вход в систему по паролю.
      6. Назначьте **cisco** в качестве пароля VTY и включите вход в систему по паролю.
      7. Зашифруйте открытые пароли.
      8. Создайте баннер, который предупреждает о запрете несанкционированного доступа.
      9. Настройте и активируйте на маршрутизаторе интерфейс G0/0/1, используя информацию, приведенную в таблице адресации.

![image](https://user-images.githubusercontent.com/80053204/115622985-4140e980-a301-11eb-9990-c4921cddb09c.png)

1. Сохраните текущую конфигурацию в файл загрузочной конфигурации.
![image](https://user-images.githubusercontent.com/80053204/115623015-49992480-a301-11eb-9545-c95241e5f852.png)

### Настройте компьютер PC-A.

      1. Настройте для PC-A IP-адрес и маску подсети.
      2. Настройте для PC-A шлюз по умолчанию.

![image](https://user-images.githubusercontent.com/80053204/115623052-59b10400-a301-11eb-8aa7-0c022507a9f0.png)

### Проверьте подключение к сети.

Пошлите с PC-A команду Ping на маршрутизатор R1. Если эхо-запрос с помощью команды ping не проходит, найдите и устраните неполадки подключения.

![image](https://user-images.githubusercontent.com/80053204/115623080-659cc600-a301-11eb-9791-001ad043774d.png)

Закройте окно настройки.


## Настройка маршрутизатора для доступа по протоколу SSH

Подключение к сетевым устройствам по протоколу Telnet сопряжено с риском для безопасности, поскольку вся информация передается в виде открытого текста. Протокол SSH шифрует данные сеанса и обеспечивает аутентификацию устройств, поэтому для удаленных подключений рекомендуется использовать именно этот протокол. В части 2 вам нужно настроить маршрутизатор для приема соединений SSH по линиям VTY.

 
### Настройте аутентификацию устройств.

При генерации ключа шифрования в качестве его части используются имя устройства и домен. Поэтому эти имена необходимо указать перед вводом команды **crypto key**.

Откройте окно конфигурации

       Задайте имя устройства.

Router(config)# **hostname R1**

      Задайте домен для устройства.
 R1(config)# **ip domain-name laba5.com**

  
### Создайте ключ шифрования с указанием его длины.

![image](https://user-images.githubusercontent.com/80053204/115623167-7fd6a400-a301-11eb-9f96-28dbe87b0761.png)
 
### Создайте имя пользователя в локальной базе учетных записей.
![image](https://user-images.githubusercontent.com/80053204/115623193-89600c00-a301-11eb-9007-fb81ff534573.png)


Настройте имя пользователя, используя **admin** в качестве имени пользователя и **Adm1nP @55** в качестве пароля.

  
### Активируйте протокол SSH на линиях VTY.

       Активируйте протоколы Telnet и SSH на входящих линиях VTY с помощью команды **transport input**.
1. R1(config)# **line vty 0 4**
2. R1(config-line)# **transport input telnet**
3. R1(config-line)# **transport input ssh**

       Измените способ входа в систему таким образом, чтобы использовалась проверка пользователей по локальной базе учетных записей.
1. R1(config-line)# **login local**
2. R1(config-line)# **end**
3. R1#

   
### Сохраните текущую конфигурацию в файл загрузочной конфигурации.

![image](https://user-images.githubusercontent.com/80053204/115623243-9aa91880-a301-11eb-934d-84b1d312f05c.png)

### Установите соединение с маршрутизатором по протоколу SSH.

      1. Запустите Tera Term с PC-A.
      2. Установите SSH-подключение к R1. Usetheusername **admin** andpassword **Adm**** 1 ****nP**** @55**. У вас должно получиться установить SSH-подключение к R1.
![image](https://user-images.githubusercontent.com/80053204/115623271-a4328080-a301-11eb-8371-b8a09c528315.png)


Закройте окно настройки.

 
## Настройка коммутатора для доступа по протоколу SSH

  
### Установите соединение с коммутатором по протоколу SSH.

Запустите программу Tera Term на PC-A, затем установите подключение по протоколу SSH к интерфейсу SVI коммутатора S1.

#### Вопрос:

Удалось ли вам установить SSH-соединение с коммутатором?

![image](https://user-images.githubusercontent.com/80053204/115623315-b3193300-a301-11eb-8ffe-1191567366d0.png)

Закройте окно настройки.

 
## Настройка протокола SSH с использованием интерфейса командной строки (CLI) коммутатора

Клиент SSH встроен в операционную систему Cisco IOS и может запускаться из интерфейса командной строки. В части 4 вам предстоит установить соединение с маршрутизатором по протоколу SSH, используя интерфейс командной строки коммутатора.

   
### Посмотрите доступные параметры для клиента SSH в Cisco IOS.

Откройте окно конфигурации

Используйте вопросительный знак ( **?** ), чтобы отобразить варианты параметров для команды **ssh**.

S1# **ssh?**

-c Select encryption algorithm

-l Log in using this user name

-m Select HMAC algorithm

-o Specify options

-p Connect to this port

-v Specify SSH Protocol Version

-vrf Specify vrf name

WORD IP-адрес или имя хоста удаленной системы

   
### Установите с коммутатора S1 соединение с маршрутизатором R1 по протоколу SSH.

       Чтобы подключиться к маршрутизатору R1 по протоколу SSH, введите команду **–l admin**. Это позволит вам войти в систему под именем **admin**. При появлении приглашения введите в качестве пароля **Adm1nP@55**
![image](https://user-images.githubusercontent.com/80053204/115623365-c4fad600-a301-11eb-8f6b-df2846531cea.png)

       Чтобы вернуться к коммутатору S1, не закрывая сеанс SSH с маршрутизатором R1, нажмите комбинацию клавиш **Ctrl** + **Shift** + **6**. Отпустите клавиши **Ctrl** + **Shift** + **6** и нажмите **x**. Отображается приглашение привилегированного режима EXEC коммутатора.

R1\&gt;

S1#

      Чтобы вернуться к сеансу SSH на R1, нажмите клавишу Enter в пустой строке интерфейса командной строки. Чтобы увидеть окно командной строки маршрутизатора, нажмите клавишу Enter еще раз.

S1#

[Resuming connection 1 to 192.168.1.1 ...]

R1\&gt;

      Чтобы завершить сеанс SSH на маршрутизаторе R1, введите в командной строке маршрутизатора команду **exit**.

R1# **exit**

[Connection to 192.168.1.1 closed by foreign host]

S1#

#### Вопрос:



Закройте окно настройки.

# Вопрос для повторения

Как предоставить доступ к сетевому устройству нескольким пользователям, у каждого из которых есть собственное имя пользователя?

**Ответ: Нужно настроить доступ по SSH и создать несколько пользователей при помощи команды username.**

©  - гггг Корпорация Cisco и/или ее дочерние компании. Все права защищены. Открытая информация Cisco страница **1**** 5**www.netacad.com
